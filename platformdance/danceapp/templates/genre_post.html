{% extends 'base.html' %}
{% block content %}
{% load static %}
<!-- main -->
<h1>{{ genre.name }} Page</h1>
<hr>

<!-- 실시간 top10 장르 영상 출력 -->
<h2>실시간 Top10 {{ genre.name }} 영상</h2>



<hr>

<!-- 장르 영상 출력 -->
<h2>전체 {{ genre.name }} 영상</h2>
<style>
    table {
        border: 1px solid black;
    }
    td, th {
        border: 1px solid black;
    }
    th {
        text-align: center;
    }
    .main1 {
        display: grid; 
        grid-template-columns: repeat(1, 1fr); 
        grid-gap: 1rem; 
        grid-auto-rows: minmax(10em, auto); 
        justify-items: start;
        width: 100%;
    }
</style>
<div class="main1">
    {% for post in posts %}
    {% if post.genreName.name == genre.name %}
    <div>
        <table>
            <tr>
                <!-- 섬네일 -->
                <td rowspan="4">{{ post.photo }}</td>
                <!-- 제목 -->
                <td colspan="3">{{ post.title }}</td>
            </tr>
            <tr>
                <!-- 내용 -->
                <td colspan="3">{{ post.body }}</td>
            </tr>
            <tr>
                <!-- 장르, 작성자, 좋아요 수 -->
                <td>{{ post.genreName.name }}</td>
                <td>{{ post.userId.nickname }}</td>
                <td>
                    <form action="{% url 'likes' post.id %}" method="POST">
                        {% csrf_token %}
                        좋아요 수 : {{ post.likes_count }}
                        {% if request.user.is_authenticated %}
                        {% if request.user in post.likes_user.all %}
                        <input type="submit" value="dislike">
                        {% else %}
                        <input type="submit" value="like">
                        {% endif %}
                        {% endif %}
                    </form>
                </td>
            </tr>
            <tr>
                <!-- 게시일 -->
                <td colspan="3">{{ post.uploadDate }}</td>
            </tr>
            
        </table>
    </div>
    {% endif %}
    {% endfor %}
</div>
{% endblock %}